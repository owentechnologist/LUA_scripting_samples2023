### This set of lua scripts generates useful data to be used when generating sample JSON object
- copy paste the following set of commands (all at once) into the RedisInsight workbench top panel to generate the base keys:  

``` 
EVAL "redis.call('SADD', KEYS[1], 'ORACLE', 'SYBASE', 'DB2', 'SQLSERVER', 'MYSQL', 'POSGRESQL', 'HBASE', 'HIVE', 'TERADATA', 'GREENPLUM', 'VERTICA', 'HANA', 'CSV')" 1 platform:{1}
EVAL "redis.call('SADD', KEYS[1], 'Advertising', 'Security', 'Gaming', 'Accounting', 'Messaging', 'Scheduling', 'Manufacturing', 'Shipping', 'HR', 'Support', 'PublicRelations')" 1 purpose:{1}
EVAL "redis.call('SADD',KEYS[1],'Blue', 'Green', 'Yellow', 'Orange', 'Mauve', 'Purple', 'Red', 'Grey', 'Silver', 'Gold', 'White', 'Black')" 1 color:{1}
EVAL "redis.call('SADD',KEYS[1],'DR', 'QA', 'UAT', 'PROD', 'STG', 'Dev')" 1 stage:{1}
EVAL "redis.call('SADD',KEYS[1],'VARCHAR', 'DECIMAL', 'DATETIME', 'VARCHAR2', 'NUMERIC', 'INT', 'BIT', 'TIMESTAMP', 'BLOB', 'CLOB', 'BIGINT', 'TINYINT')" 1 datatype:{1}
EVAL "redis.call('SADD','statuses'..KEYS[1],'cancelled','damaged','processing','placed','shipped','delivered') redis.call('SADD','productcats'..KEYS[1],'household','automotive','collectibles','crafts','decor','toys','bags','belts','wallets','hats','jewellry','scarves','sunglasses','lingerie','pants','skirts','cellphones','cameras','food','bath','medicine','vitamins','tools','supplies','furniture','gardening','kitchen','pets','rugs','linens','adult','orthotics','prosthetics','office','football','hunting','snowboarding','swimming','household') redis.call('SADD','charblocks'..KEYS[1],'abhoyzAOTVZ','WdefklmnVWX','YtrDhkiYcnB','LuGfeInUbvF','KlEEugRAAAA','lDDerSkGGFF','mndtRRewAAk','GGfsptrSrrS','EErfdjJvVVa','swqaNgfNMWW') redis.call('SADD','alpha'..KEYS[1],'a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z','A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z') redis.call('SADD','year'..KEYS[1],'2022','2021','2020','2019','2018','2017','2016','2015','2014','2013','2012','2011','2010','2009','2008','2007','2006','2005') redis.call('SADD','month'..KEYS[1],'01','02','03','04','05','06','07','08','09','10','11','12') redis.call('SADD','day'..KEYS[1],'1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28') redis.call('SADD','colors'..KEYS[1],'blue','green','purple','orange','yellow','red','silver','gold','white','black','grey') return 'done'" 1 {1}
EVAL "redis.call('SADD','phrases'..KEYS[1],' a welcome addition ',' commonly used in ',' charming and remarkable ',' dust it off a bit ',' no risk\, no reward ',' following trends in the marketplace  ',' an expensive but valuable addition ',' family\-style eating with a twist ',' we are not going to walk away ',' I am totally open to that ',' He is the expert in this domain ',' see you soon ',' we are nervous ',' excited ', ' celebrate ', ' funny\, I know but ',' I have a question ',' how was your weekend ',' you please pass me ',' the nearest ', ' terrible ', ' going on to the next ', ' here is a list ', ' says you should repeat that ', ' lack of data privacy or data loss concerns ', ' unresolved software bugs or glitches ', ' data breaches or security vulnerabilities ',' outdated software or hardware ', ' inefficient IT infrastructure ', ' frequent error messages ', ' lack of software training or documentation ',' unreliable backup and recovery systems ', ' incompatibility with software or hardware ', ' lost or deleted files ', ' unresponsive or slow customer support ', ' printer connectivity problems ', ' malware or virus infections ', ' email delivery issues ',' annoying software updates ',' forgotten or expired passwords ',' difficulty connecting to Wi\-Fi networks ',' inadequate storage space ', ' constant system crashes or freezes ',' slow internet connection ',' I authorize the shipping company to conduct necessary inspections and security checks on my shipment to ensure compliance with legal and safety requirements ',' I\\'m super excited about this large item\, but I have a tiny suggestion ',' can we brainstorm some ideas ', ' a little more pizzazz to make it visually appealing ',' make it stand out on the shelves ',' I think we can make it look more modern and trendy ', ' make sure it reflects the awesomeness of the product inside ') return 'done'" 1 {1}
EVAL "redis.call('SADD',KEYS[1],'streamline', 'condense', 'optimize', 'refine', 'uncomplicate', 'facilitate', 'economize', 'standardize', 'minimize', 'modulate', 'synchronize', 'cultivate', 'harvest', 'nurture', 'diagnose', 'treat', 'pollinate', 'prune', 'plant', 'reap', 'grow', 'heal', 'fertilize', 'transplant', 'analyze', 'collaborate', 'innovate', 'strategize', 'automate', 'communicate', 'simplify', 'integrate', 'transform', 'empower', 'leverage', 'synergize')" 1 businessverbs:{1}
EVAL "redis.call('SADD', KEYS[1], ' it is clear we need to ', ' going forward the systems will ', ' in the past we attempted to ', ' previous efforts to ', ' together we can ', ' there is no scenario where your team can ', ' looking forward to watching us ', ' make every effort to ', ' stop trying to ', ' continue to ', ' stymie all attempts to ', ' enhance our chances to ', ' pause and reflect before we ')" 1 glueforverbs:{1}
EVAL "redis.call('SADD', KEYS[1], 'It is a welcome addition to the tech landscape, offering unique features', 'Commonly used in various industries, it brings efficiency and productivity', 'The technology is charming and remarkable, capturing attention with its innovation', 'It needs a little polishing to remove minor issues, but overall, it is promising', 'Embracing the philosophy of no risk, no reward, it pushes boundaries', 'It keeps up with the latest trends, catering to the evolving marketplace', 'While it may be expensive, its value justifies the investment', 'It brings a fresh twist to familiar concepts, enhancing user experience', 'We are committed to it, not abandoning it easily due to its potential', 'Open to feedback and suggestions, it fosters collaboration and improvement', 'It provides expertise in its domain, guiding users with its knowledge', 'Looking forward to future interactions, saying see you soon', 'There is a mix of nervousness and excitement surrounding this technology', 'It is worth celebrating for its positive impact and achievements', 'Surprisingly, it adds a touch of humor, making interactions enjoyable', 'It encourages questions and invites discussions for better understanding', 'Showing interest, it inquires about the weekend experiences of users', 'Asking politely, it requests assistance with nearby locations or objects', 'Unfortunately, it falls short in terms of quality, being described as terrible', 'Moving on, it presents a list of alternatives for consideration', 'Urging users to repeat certain actions, it emphasizes the importance', 'It addresses concerns about data privacy and security, prioritizing protection', 'Proactively resolving bugs and glitches, it ensures a smooth experience', 'Protecting against data breaches, it strengthens security measures', 'It stays updated, avoiding issues related to outdated software or hardware', 'Optimizing IT infrastructure, it enhances efficiency and performance', 'Minimizing error messages, it offers a seamless user experience', 'Providing comprehensive training and documentation, it facilitates software usage', 'Ensuring data safety, it offers reliable backup and recovery systems', 'Compatible with various software and hardware, it promotes seamless integration', 'Preventing data loss, it safeguards against file deletion or loss', 'Offering responsive customer support, it resolves issues promptly', 'Streamlining printer connectivity, it eliminates common problems', 'Protecting against malware and viruses, it ensures a secure environment', 'Ensuring smooth email delivery, it minimizes communication obstacles', 'Balancing software updates, it minimizes inconvenience for users', 'Helping users manage passwords effectively, it reduces forgotten or expired passwords', 'Simplifying Wi-Fi connectivity, it eliminates difficulties in network connections', 'Providing ample storage space, it prevents data limitations', 'Stability is guaranteed with minimal system crashes or freezes', 'Offering a reliable internet connection, it ensures uninterrupted usage', 'Allowing necessary inspections and security checks, it ensures compliance', 'Excitement surrounds the large item, with a minor suggestion for improvement', 'Encouraging creativity, it sparks brainstorming sessions for innovative ideas', 'Adding visual appeal, it enhances the aesthetics and attractiveness', 'Standing out on shelves, it grabs attention with its modern and trendy design')" 1 reviews:{1}

```
 
### This script generates json objects in a single slot 
- modify the last argument to write more JSON objects [ up to 25K seems to not timeout ]
- copy paste the following into the RedisInsight workbench or execute it in redis-cli 
``` 
EVAL "for tableid = ARGV[1],ARGV[2] do local datatypeSet = redis.call('SMEMBERS','datatype:'..KEYS[1]) local colorSet = redis.call('SMEMBERS','color:'..KEYS[1]) local stageSet = redis.call('SMEMBERS','stage:'..KEYS[1]) local purposeSet = redis.call('SMEMBERS','purpose:'..KEYS[1]) local platformSet = redis.call('SMEMBERS','platform:'..KEYS[1]) local vall = (tableid%100)+1 local color = colorSet[(vall%11)+1] local stage = stageSet[(vall%5)+1] local purpose = purposeSet[(vall%10)+1] local platform = platformSet[(vall%12)+1] local description = 'Last known status:  '..redis.call('SRANDMEMBER','statuses'..KEYS[1])..'    Summary By Outside Eyes:  '..redis.call('SRANDMEMBER','reviews:'..KEYS[1])..redis.call('SRANDMEMBER','phrases'..KEYS[1])..redis.call('SRANDMEMBER','productcats'..KEYS[1])..' '..redis.call('SRANDMEMBER','year'..KEYS[1])..' Overall Tone expressed as a color is: '..color..'  Last 10 posted reviews:   1: '..redis.call('SRANDMEMBER','reviews:'..KEYS[1])..'  2: '..redis.call('SRANDMEMBER','reviews:'..KEYS[1])..'  3: '..redis.call('SRANDMEMBER','reviews:'..KEYS[1])..'  4: '..redis.call('SRANDMEMBER','reviews:'..KEYS[1])..'  5: '..redis.call('SRANDMEMBER','reviews:'..KEYS[1])..'  6: '..redis.call('SRANDMEMBER','reviews:'..KEYS[1])..'  7: '..redis.call('SRANDMEMBER','reviews:'..KEYS[1])..'  8: '..redis.call('SRANDMEMBER','reviews:'..KEYS[1])..'  9: '..redis.call('SRANDMEMBER','reviews:'..KEYS[1])..'  10: '..redis.call('SRANDMEMBER','reviews:'..KEYS[1])..' With all of the above in mind, dare I suggest  (awkward)  '..redis.call('SRANDMEMBER','glueforverbs:'..KEYS[1])..redis.call('SRANDMEMBER','businessverbs:'..KEYS[1])..redis.call('SRANDMEMBER','phrases'..KEYS[1])..stage..redis.call('SRANDMEMBER','phrases'..KEYS[1])..purpose..redis.call('SRANDMEMBER','phrases'..KEYS[1])..platform..' has '..redis.call('SRANDMEMBER','phrases'..KEYS[1])  redis.call('JSON.SET', 'dcp:'..KEYS[1]..tableid, '$','{\"tableid\": '..tableid..',\"comments\":\"'..description..'\",\"buareaname\":\"'..color..'-'..purpose..' Platform\",\"buname\":\"'..color..'-'..purpose..'\",\"subbuname\":\"'..vall..'-vl-'..color..'_'..purpose..'\",\"platform\":\"'..platform..'\",\"dbname\":\"'..platform..vall..'_'..color..'_'..purpose..'DB\",\"tablename\":\"'..color..'-'..purpose..'-'..vall..'-'..stage..'\",\"tabletype\":\"T\",\"piiimpactedflag\":\"No\",\"tableowner\":\" \",\"dbowner\":\" \",\"retentiondetails\": [{\"retid\": '..(tableid*vall)..',\"rettype\": null,\"retcateg\": \"'..color..'TXN\",\"readytochopflag\": \"NA - Out of Scope\",\"action\": \"D\",\"retpromoted\": \"N\",\"exceptionid\": null}],\"nullifylist\": null,\"columndetails\":[{\"columnid\": 1000,\"columnname\":\"BLUE_BLUE_1000..vall\",\"datatype\":\"VARCHAR\",\"tag\":\"BLUE..vall\",\"tagflag\": \"N\"}]}') for columnid = 10001,10021 do local datatype = datatypeSet[(columnid%11)+1] local color2 = colorSet[(columnid%11)+1] redis.call('JSON.ARRAPPEND','dcp:'..KEYS[1]..tableid, '$.columndetails','{\"columnid\": '..columnid..',\"columnname\":\"'..color..'-'..color2..'-'..columnid..'\",\"datatype\":\"'..datatype..'\",\"tag\":\"'..color2..'-'..(columnid*tableid)..'-'..color..'\",\"tagflag\": \"N\"}') end end" 1 {1} 1 100
```

NB: if you want to scale and utilize multiple shards/slots you need to:
- (adjust the keyname [2nd] argument for each EVAL line above (all of them) if you want to write to a different slot --replace all the curly-brace contents with a consistent and new value: for example change {1} to --> {2} )


### This script creates a search schema for the above JSON dataset
``` 
FT.CREATE idx_dcp ON JSON PREFIX 1 dcp: SCHEMA $.comments AS comments TEXT $.flag AS flag TAG $.tableid AS tableid NUMERIC $.tablename as tablename TEXT $.buareaname AS buareaname TAG $.buname AS buname TAG $.dbname as dbname TEXT $.platform as platform TEXT $.columndetails[*].columnname AS columnname TEXT $.columndetails[*].datatype AS datatype TAG $.columndetails[*].tag AS tag TAG $.columndetails[*].columnid AS columnid NUMERIC
```
### This FT.CREATE command is for earlier versions of search that do no support multi-value [*] indexing
``` 
FT.CREATE idx_dcp ON JSON PREFIX 1 dcp: SCHEMA $.comments AS comments TEXT $.flag AS flag TAG $.tableid AS tableid NUMERIC $.tablename as tablename TEXT $.buareaname AS buareaname TAG $.buname AS buname TAG $.dbname as dbname TEXT $.platform as platform TEXT $.columndetails[0].columnname AS columnname TEXT $.columndetails[0].datatype AS datatype TAG $.columndetails[0].tag AS tag TAG $.columndetails[0].columnid AS columnid NUMERIC
```

### This is a query that results in some output based on the column type equaling DATETIME
### Note that the response is not the entire JSON payload (the whole table) but rather the matching column info
``` 
FT.SEARCH idx_dcp @comments:(Oracle) return 1 $.tableid LIMIT 0 10
```
``` 
FT.SEARCH idx_dcp @comments:(Oracle) return 1 $.columndetails[2] LIMIT 0 1
```
``` 
FT.SEARCH idx_dcp '@datatype:{DATETIME}' RETURN 3 '$.columndetails[?(@.datatype=="DATETIME")]' as match
```
``` 
FT.AGGREGATE idx_dcp '@datatype:{BIGINT}' LOAD 5 '$.columndetails[?(@.datatype=="BIGINT")]' as match @__key @tableid LIMIT 0 10 DIALECT 3
```
Here we indicate we want to summarize a long comment field:
``` 
FT.SEARCH idx_dcp '@platform:(Greenplum) @comments:(cancelled)' SUMMARIZE FIELDS 1 comments FRAGS 1 LEN 3 LIMIT 0 1 DIALECT 3
```
Here we indicate we want to highlight the matching tokens in the result:
``` 
FT.SEARCH idx_dcp '@platform:(Greenplum) @comments:(cancelled)' HIGHLIGHT FIELDS 1 comments LIMIT 0 1 DIALECT 3
```